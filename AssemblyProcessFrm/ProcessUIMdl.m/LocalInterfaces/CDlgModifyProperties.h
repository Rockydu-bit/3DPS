// COPYRIGHT Dassault Systemes 2015
//===================================================================
//
// CDlgModifyProperties.h
// The dialog : CDlgModifyProperties
//
//===================================================================
//
// Usage notes:
//
//===================================================================
//CAA2 Wizard Generation Report
//   DIALOG
//End CAA2 Wizard Generation Report
//
//  Oct 2015  Creation: Code generated by the CAA wizard  WANGJIAPENG
//===================================================================
#ifndef CDlgModifyProperties_H
#define CDlgModifyProperties_H

#include "CATDlgDialog.h"
#include "CATDlgInclude.h"
#include "CATListOfCATBaseUnknown.h"
#include "stdafx.h"
#include "CATPPRProcess.h"
#include "CAATreeCtrl.h"
#include "TreeNodeSelectNotif.h"

//----------------------------------------------------------------------

/**
 * Describe the purpose of your panel here.
 * <p>
 * Using this prefered syntax will enable mkdoc to document your class.
 * <p>
 * refer to programming resources of Dialog framework.
 * (consult base class description).
 */
class CDlgModifyProperties: public CATDlgDialog
{
  // Allows customization/internationalization of command's messages
  // ---------------------------------------------------------------
  DeclareResource( CDlgModifyProperties, CATDlgDialog )

  public:

  CDlgModifyProperties();
  virtual ~CDlgModifyProperties();

public:
	static CDlgModifyProperties* GetInstance();
public:
	static CDlgModifyProperties* m_pDlgProperties;

	CString strFlag;
	CString strNameAndNum;//树节点名称
	int m_NodeLocate;
	//Process所有节点信息
	CArray<ProcessNode*,ProcessNode*> ProcessNodeArray;

	//树控件的根节点指针列表
	CATLISTP(CATBaseUnknown) * pRootTreeNodeList;

  void Build ();

  //修改BOM树
  CATBoolean ModifyBOMTree();
  //获取当前选中的树节点对应的工序节点
  int GetSelectedProcessNode(CString strNode);
  //生成BOM树
  CATBoolean GenerateBOMTree(CATDlgFrame* frame,CArray<ProcessNode*,ProcessNode*>& ProcessNodeArray);
  //添加对用户交互选择树形结构控件的响应
  void OnTreeNodeSelect(CATCallbackEvent event,void * client,CATNotification* iNotification,CATSubscriberData data,CATCallback callback);
  //获取Editor的内容，可能多行
  CATUnicodeString GetEditorContent(CATDlgEditor* _Editor);
  //获取同层的Activity
  CATBoolean GetSameLayerActivity(int layer);

  protected:

  virtual void OnRadioButtonChildRadBModifyNotification (CATCommand *, CATNotification* , CATCommandClientData data);

  virtual void OnRadioButtonBeforeRadBModifyNotification (CATCommand *, CATNotification* , CATCommandClientData data);

  virtual void OnRadioButtonChangeNameRadBModifyNotification (CATCommand *, CATNotification* , CATCommandClientData data);

  virtual void OnRadioButtonDeleteRadBModifyNotification (CATCommand *, CATNotification* , CATCommandClientData data);

  virtual void OnRadioButtonAfterRadBModifyNotification (CATCommand *, CATNotification* , CATCommandClientData data);

  private:


//CAA2 WIZARD WIDGET DECLARATION SECTION
 CATDlgFrame*      _Frame002;
 CATDlgRadioButton*      _RadioButtonDelete;
 CATDlgRadioButton*      _RadioButtonAfter;
 CATDlgRadioButton*      _RadioButtonChangeName;
 CATDlgLabel*      _LabelName;
 CATDlgEditor*      _EditorName;
 CATDlgRadioButton*      _RadioButtonBefore;
 CATDlgRadioButton*      _RadioButtonChild;
 CATDlgFrame*      _FrameBOMTree;
//END CAA2 WIZARD WIDGET DECLARATION SECTION
 CATPPRProcess			*pPPRProcess;
 CAATreeCtrl			*pTreeCtrl;
};

//----------------------------------------------------------------------

#endif
